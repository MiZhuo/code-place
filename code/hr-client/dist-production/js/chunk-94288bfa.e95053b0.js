(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94288bfa"],{"0ebc":function(t,e,s){},"1e87":function(t,e,s){"use strict";var n=s("d650"),a=s.n(n);a.a},"5ced":function(t,e,s){},7793:function(t,e,s){},"7f28":function(t,e,s){},"8e76":function(t,e,s){"use strict";var n=s("0ebc"),a=s.n(n);a.a},"94c6":function(t,e,s){"use strict";var n=s("7f28"),a=s.n(n);a.a},a54c:function(t,e,s){},bb51:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-header",{staticClass:"homeHeader"},[s("div",{staticClass:"title"},[t._v("微人事")]),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("el-button",{staticStyle:{"margin-right":"20px","font-size":"20px",color:"#000000"},attrs:{icon:"el-icon-bell",type:"text"},on:{click:t.openChat}})],1),s("div",[s("el-dropdown",{staticClass:"userInfo",on:{command:t.commandHandler}},[s("span",{staticClass:"el-dropdown-link"},[s("img",{attrs:{src:t.user.userFace}}),t._v(t._s(t.user.name)+" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"userInfo"}},[s("i",{staticClass:"el-icon-user-solid"}),t._v("个人中心")]),s("el-dropdown-item",{attrs:{command:"setting"}},[s("i",{staticClass:"el-icon-s-tools"}),t._v("设置")]),s("el-dropdown-item",{attrs:{command:"logout",divided:""}},[s("i",{staticClass:"el-icon-s-fold"}),t._v("注销登录")])],1)],1)],1)])])],1),s("el-container",[s("el-aside",{attrs:{width:"200px"}},[s("el-menu",{attrs:{router:"","unique-opened":""}},t._l(t.routes,(function(e,n){return s("el-submenu",{key:n,attrs:{index:n+""}},[s("template",{slot:"title"},[s("i",{class:e.iconCls,staticStyle:{color:"#409eff","margin-right":"5px"}}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._l(e.children,(function(e,n){return s("el-menu-item",{key:n,attrs:{index:e.path}},[t._v(t._s(e.name))])}))],2)})),1)],1),s("el-main",["/home"!=this.$router.currentRoute.path?s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),s("el-breadcrumb-item",[t._v(t._s(this.$router.currentRoute.name))])],1):t._e(),"/home"==this.$router.currentRoute.path?s("div",[t._v("Welcome to hr!")]):t._e(),s("router-view",{staticClass:"homeRouterView"})],1)],1),s("el-dialog",{attrs:{id:"chatDialog",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("div",{staticStyle:{height:"100px"}},[s("Chat")],1)])],1)},a=[],r=(s("ac1f"),s("5319"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"chat"}},[s("div",{staticClass:"sidebar"},[s("Card"),s("List")],1),s("div",{staticClass:"main"},[s("Message"),s("UserText")],1)])}),i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"card"}},[s("header",[s("img",{staticClass:"avatar",attrs:{src:t.user.userFace,alt:t.user.name}}),s("p",{staticClass:"name"},[t._v(t._s(t.user.name))])]),s("footer",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.filterKey,expression:"$store.state.filterKey"}],staticClass:"search",attrs:{type:"text",placeholder:"search user..."},domProps:{value:t.$store.state.filterKey},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"filterKey",e.target.value)}}})])])},c=[],u={name:"Card",data:function(){return{user:JSON.parse(window.sessionStorage.getItem("user"))}}},l=u,d=(s("1e87"),s("2877")),m=Object(d["a"])(l,o,c,!1,null,"79e951ac",null),f=m.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"list"}},[s("ul",{staticStyle:{"padding-left":"0px"}},t._l(t.hrs,(function(e){return s("li",{class:{active:!!t.currentSession&&e.username===t.currentSession.username},on:{click:function(s){return t.changeCurrentSession(e)}}},[s("img",{staticClass:"avatar",attrs:{src:e.userFace,alt:e.name}}),s("el-badge",{attrs:{"is-dot":t.isDot[t.user.username+"#"+e.username]}},[s("p",{staticClass:"name"},[t._v(t._s(e.name)),s("span",{staticStyle:{"font-size":"4px"}},[t._v(t._s("true"==e.isOnline?"[在线]":"[离线]")+" ")])])])],1)})),0)])},h=[],v=s("2f62"),g={name:"List",data:function(){return{user:JSON.parse(window.sessionStorage.getItem("user"))}},computed:Object(v["b"])(["hrs","currentSession","isDot"]),methods:{changeCurrentSession:function(t){this.$store.commit("changeCurrentSession",t)}}},b=g,_=(s("8e76"),Object(d["a"])(b,p,h,!1,null,"3963ee80",null)),w=_.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"scroll-bottom",rawName:"v-scroll-bottom",value:t.sessions,expression:"sessions"}],attrs:{id:"message"}},[t.currentSession?s("ul",t._l(t.sessions[t.user.username+"#"+t.currentSession.username],(function(e){return s("li",[s("p",{staticClass:"time"},[s("span",[t._v(t._s(t._f("time")(e.date)))])]),s("div",{staticClass:"main",class:{self:e.self}},[s("img",{staticClass:"avatar",attrs:{src:e.self?t.user.userFace:t.currentSession.userFace,alt:""}}),s("p",{staticClass:"text"},[t._v(t._s(e.content))])])])})),0):t._e()])},x=[],S=(s("99af"),{name:"Message",data:function(){return{user:JSON.parse(window.sessionStorage.getItem("user"))}},computed:Object(v["b"])(["sessions","currentSession"]),filters:{time:function(t){return t&&(t=new Date(t)),"".concat(t.getHours(),":").concat(t.getMinutes())}},directives:{"scroll-bottom":function(t){setTimeout((function(){t.scrollTop+=9999}),1)}}}),$=S,y=(s("f3a0"),Object(d["a"])($,C,x,!1,null,"1d81216a",null)),O=y.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"userText"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"按 Ctrl + Enter 发送"},domProps:{value:t.content},on:{keyup:t.addMessage,input:function(e){e.target.composing||(t.content=e.target.value)}}})])},j=[],F={name:"UserText",data:function(){return{content:""}},computed:Object(v["b"])(["sessions","currentSession"]),methods:{addMessage:function(t){if(t.ctrlKey&&13===t.keyCode&&this.content.length){var e=new Object;e.to=this.currentSession.username,e.content=this.content,this.$store.state.stomp.send("/ws/chat",{},JSON.stringify(e)),this.$store.commit("addMessage",e),this.content=""}}}},I=F,N=(s("d6f7"),Object(d["a"])(I,k,j,!1,null,"18c4cfa0",null)),T=N.exports,E={name:"Chat",data:function(){return{}},mounted:function(){this.$store.dispatch("initData")},components:{UserText:T,Card:f,List:w,Message:O}},J=E,M=(s("94c6"),Object(d["a"])(J,r,i,!1,null,"751181d8",null)),R=M.exports,D={name:"Home",components:{Chat:R},data:function(){return{user:JSON.parse(window.sessionStorage.getItem("user")),collapse:!0,dialogFormVisible:!1}},methods:{commandHandler:function(t){var e=this;switch(t){case"userInfo":break;case"setting":break;case"logout":this.$confirm("是否退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.getRequest("/logout"),window.sessionStorage.removeItem("user"),e.$store.commit("initRoutes",[]),e.$router.replace("/")}));break;default:}},menuClick:function(t){console.log(t)},openChat:function(){this.dialogFormVisible=!0}},computed:{routes:function(){return this.$store.state.routes}},mounted:function(){this.$store.dispatch("connect")}},H=D,K=(s("cccb"),Object(d["a"])(H,n,a,!1,null,null,null));e["default"]=K.exports},cccb:function(t,e,s){"use strict";var n=s("5ced"),a=s.n(n);a.a},d650:function(t,e,s){},d6f7:function(t,e,s){"use strict";var n=s("7793"),a=s.n(n);a.a},f3a0:function(t,e,s){"use strict";var n=s("a54c"),a=s.n(n);a.a}}]);
//# sourceMappingURL=chunk-94288bfa.e95053b0.js.map